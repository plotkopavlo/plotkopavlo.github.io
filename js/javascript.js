function changeCityInCountry(){if(200==xhrCities.status)for(var a=0;a<SelectCountry.options.length;a++)if(SelectCountry.options[a].selected){for(console.log("city");SelectCity.firstChild;)SelectCity.removeChild(SelectCity.firstChild);for(var b in ListCities)if(SelectCountry.options[a].value==ListCities[b].country){var c=document.createElement("option");c.setAttribute("value",b),c.innerHTML=String(ListCities[b].name),SelectCity.insertAdjacentElement("beforeEnd",c)}}}function RewriteClassPrev(a){document.getElementById("nav__button-"+a).classList.remove("nav__button--active"),document.getElementById("nav__button-"+(a-1)).classList.add("nav__button--active")}function RewriteClassNext(a){var b=document.getElementById("nav__button-"+a).classList,c=document.getElementById("nav__button-"+(a+1)).classList;b.remove("nav__button--active"),c.add("nav__button--active"),b.contains("nav__button--passing")&&(b.remove("nav__button--passing"),b.add("nav__button--passed")),c.contains("nav__button--not-passed")&&(c.remove("nav__button--not-passed"),c.add("nav__button--passing"))}function RewriteClassSubmite(a){var b=document.getElementById("nav__button-"+a).classList;b.remove("nav__button--passing"),b.remove("nav__button--active"),b.add("nav__button--passed")}function createPrevButton(a){var b="form__step"+a;$("#"+b+"commands").append("<button type='button' class='form__button form__button--prev' id='"+b+"Prev' class='prev'> <span class='form__icon-svg form__icon-svg--prev'> </span> <span class='form__button-text'>  Предыдущий </span></button>"),0!==a&&(document.getElementById(b+"Prev").onclick=function(c){document.getElementById(b).classList.add("form__step--undisplay"),document.getElementById("form__step"+(a-1)).classList.remove("form__step--undisplay"),RewriteClassPrev(a)})}function createNextButton(a){var b="form__step"+a;$("#"+b+"commands").append("<button type='button' class='form__button form__button--next' id='"+b+"Next'> <span class='form__icon-svg form__icon-svg--next'> </span> <span class='form__button-text'> Следующий </span></button>"),document.getElementById(b+"Next").onclick=function(c){valid(a)&&(document.getElementById(b).classList.add("form__step--undisplay"),document.getElementById("form__step"+(a+1)).classList.remove("form__step--undisplay"),RewriteClassNext(a))}}function createSubmiteButton(a){document.getElementById("form__submite").classList.add("form__submite--undisplay");var b="form__step"+a;$("#"+b+"commands").append("<button type='button' class='form__submite' id='form__submite-js'> <span class='form__submite-text'> Завершить </span></button>"),document.getElementById("form__submite-js").onclick=function(c){console.log("ad"),valid(a)&&(document.getElementById(b).classList.add("form__step--undisplay"),document.getElementById("form__step0").classList.remove("form__step--undisplay"),RewriteClassSubmite(a),SwitchFormToCard())}}function valid(a){switch(a){case 0:var b=document.getElementById("form__name"),c=document.getElementById("form__email");return field_values.username="",field_values["e-mail"]="",field_values.username=b.value,field_values["e-mail"]=c.value,""!==field_values.username&&isValidEmailAddress(field_values["e-mail"])?(b.classList.remove("form__input-data--errore"),c.classList.remove("form__input-data--errore"),document.getElementById("form__step"+a).setAttribute("data-passed","true"),!0):(document.getElementById("form__step"+a).setAttribute("data-passed","false"),""===field_values.username&&b.classList.add("form__input-data--errore"),isValidEmailAddress(field_values["e-mail"])||c.classList.add("form__input-data--errore"),!1);case 1:var d=document.getElementById("form__country"),e=document.getElementById("form__city");field_values.country="",field_values.city="";for(let b=0;b<d.children.length;b++)d.children[b].selected&&(field_values.country=d.children[b].value);for(let b=0;b<e.children.length;b++)e.children[b].selected&&(field_values.city=e.children[b].value);return""!==field_values&&""!==field_values.city?(document.getElementById("form__step"+a).setAttribute("data-passed","true"),d.classList.remove("form__input-data--errore"),e.classList.remove("form__input-data--errore"),!0):(document.getElementById("form__step"+a).setAttribute("data-passed","false"),""===field_values.country&&d.classList.add("form__input-data--errore"),""===field_values.city&&e.classList.add("form__input-data--errore"),!1);case 2:var f=document.getElementsByClassName("form__checkbox-social"),g=document.getElementsByClassName("form__social-url");errore=!1;for(let b=0;b<f.length;b++)field_values["social"+(b+1)]="",document.getElementById("form__social-url-"+(b+1)).classList.remove("form__input-data--errore"),f[b].checked&&(field_values["social"+(b+1)]=g[b].value,""===field_values["social"+(b+1)]&&(document.getElementById("form__social-url-"+(b+1)).classList.add("form__input-data--errore"),errore=!0));return errore?(document.getElementById("form__step"+a).setAttribute("data-passed","false"),!1):(document.getElementById("form__step"+a).setAttribute("data-passed","true"),!0);case 3:var h=document.getElementsByClassName("form__radio"),i=document.getElementById("form__error");if(i.innerHTML="",field_values.numberCat="",h[h.length-1].checked)return i.innerHTML="Вы выбрали собачку. A надо котика",!1;for(var j=0;j<h.length-1;j++)if(h[j].checked)return field_values.numberCat=j+1,!0;return!1;default:return!1}}function isValidEmailAddress(a){var b=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return b.test(a)}function SwitchFormToCard(){document.getElementById("container-form").classList.add("container-form--undisplay"),document.getElementById("card").classList.remove("card--undisplay"),document.body.classList.add("body--background-card"),FillDataInCard()}function FillDataInCard(){var a=document.getElementsByClassName("card__social-block");document.getElementById("card__name").innerHTML=field_values.username,document.getElementById("card__email").innerHTML=field_values["e-mail"],200==xhrCities.status&&200==xhrCountries.status&&(document.getElementById("card__geotext").innerHTML=ListCountries[field_values.country]+", "+ListCities[field_values.city].name);for(var b=0;b<a.length;b++)""!==field_values["social"+(b+1)]?(a[b].classList.remove("card__social-block--undisplay"),a[b].children[0].setAttribute("href","https://"+field_values["social"+(b+1)]),a[b].children[1].innerHTML=field_values["social"+(b+1)]):a[b].classList.add("card__social-block--undisplay");document.getElementById("card__image").setAttribute("src","img/cat"+field_values.numberCat+".jpg")}function CleanFormandButton(){var a=document.getElementsByClassName("nav__button"),b=document.getElementsByClassName("form__step"),c=document.getElementsByTagName("input");for(let d=0;d<count;d++)a[d].classList.add("nav__button--not-passed"),a[d].classList.remove("nav__button--passed"),b[d].setAttribute("data-passed","false");a[0].classList.remove("nav__button--not-passed"),a[0].classList.add("nav__button--passing"),a[0].classList.add("nav__button--active");for(let d=0;d<c.length;d++)c[d].value="",c[d].checked=!1}var ListCountries,ListCities,SelectCountry=document.getElementById("form__country"),SelectCity=document.getElementById("form__city"),xhrCountries=new XMLHttpRequest,xhrCities=new XMLHttpRequest;xhrCountries.open("GET","json/countries.json",!0),xhrCountries.send(),xhrCountries.onreadystatechange=function(){if(4==xhrCountries.readyState)if(200!=xhrCountries.status)alert(xhrCountries.status+": "+xhrCountries.statusText);else{for(ListCountries=JSON.parse(xhrCountries.responseText);SelectCountry.firstChild;)SelectCountry.removeChild(SelectCountry.firstChild);for(var a in ListCountries)if(void 0!==a){var b=document.createElement("option");b.setAttribute("value",a),b.innerHTML=String(ListCountries[a]),SelectCountry.insertAdjacentElement("beforeEnd",b)}}},xhrCities.open("GET","json/cities.json",!0),xhrCities.send(),xhrCities.onreadystatechange=function(){4==xhrCities.readyState&&(200!=xhrCities.status?alert(xhrCities.status+": "+xhrCities.statusText):(ListCities=JSON.parse(xhrCities.responseText),changeCityInCountry()))},SelectCountry.onchange=function(){if(200==xhrCities.status)for(var a=0;a<SelectCountry.options.length;a++)if(SelectCountry.options[a].selected){for(console.log("city");SelectCity.firstChild;)SelectCity.removeChild(SelectCity.firstChild);for(var b in ListCities)if(SelectCountry.options[a].value==ListCities[b].country){var c=document.createElement("option");c.setAttribute("value",b),c.innerHTML=String(ListCities[b].name),SelectCity.insertAdjacentElement("beforeEnd",c)}}},document.getElementById("navigaite").classList.remove("navigaite--undisplay");var steps=$("#SignupForm fieldset"),count=steps.length,NAVList=document.getElementsByClassName("nav__button");steps.each(function(a){$(this).wrap("<div class='form__step' id='form__step"+a+"' data-passed='false'></div>"),$("#form__step"+a).append("<div class='form__control' id='form__step"+a+"commands'></div>"),0==a?(createPrevButton(a),createNextButton(a)):a==count-1?(document.getElementById("form__step"+a).classList.add("form__step--undisplay"),createPrevButton(a),createSubmiteButton(a)):(document.getElementById("form__step"+a).classList.add("form__step--undisplay"),createPrevButton(a),createNextButton(a))});var NavButton=document.getElementsByClassName("nav__button"),NumberNavButtonActive=0;for(let a=0;a<NavButton.length;a++)NavButton[a].classList.contains("nav__button--active")&&(NumberNavButtonActive=a);for(let a=0;a<NavButton.length;a++)NavButton[a].onclick=function(){if(this.classList.contains("nav__button--not-passed"))return!1;for(let a=0;a<NavButton.length;a++)NavButton[a].classList.contains("nav__button--active")&&(NumberNavButtonActive=a);a!==NumberNavButtonActive&&(this.classList.add("nav__button--active"),NavButton[NumberNavButtonActive].classList.remove("nav__button--active"),document.getElementById("form__step"+NumberNavButtonActive).classList.add("form__step--undisplay"),document.getElementById("form__step"+a).classList.remove("form__step--undisplay"))};document.getElementById("SignupForm").onsubmit=function(){return!1};let b=document.getElementsByClassName("form__fieldest"),c=new Event("click");for(let a=0;a<b.length;a++){let d=b[a].getElementsByTagName("input"),e=b[a].nextElementSibling.children[1];for(let f=0;f<d.length;f++)d[f].onkeydown=function(){13===event.keyCode&&(console.log(e),e.dispatchEvent(c))}}var field_values={username:"","e-mail":"",country:"",city:"",social1:"",social2:"",social3:"",social4:"",numberCat:""};document.getElementById("card__button").onclick=function(){document.getElementById("container-form").classList.remove("container-form--undisplay"),document.getElementById("card").classList.add("card--undisplay"),document.body.classList.remove("body--background-card"),CleanFormandButton()};